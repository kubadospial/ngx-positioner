!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-positioner",["exports","rxjs","rxjs/operators","@angular/core","@angular/common"],e):e(t["ngx-positioner"]={},t.rxjs,t.rxjs.operators,t.ng.core,t.ng.common)}(this,function(t,i,o,s,e){"use strict";var n=(r.decorators=[{type:s.Injectable}],r.ctorParameters=function(){return[]},r);function r(){this.changeSettings$=new i.Subject,this.initialSettings={offset:{isScrolledToBottom:0,isScrolledToTop:0,moveToBottom:0,moveToTop:0},delay:{isScrolledToBottom:0,isScrolledToTop:0,moveToBottom:0,moveToTop:0},debounceTime:{isScrolledToBottom:0,isScrolledToTop:0,moveToBottom:0,moveToTop:0},smoothScroll:{moveToBottom:!0,moveToTop:!0}}}var l=function(){return(l=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},c=(Object.defineProperty(p.prototype,"settings",{set:function(t){this._mergeSetttings(t)},enumerable:!0,configurable:!0}),p.prototype.ngOnInit=function(){var e=this;this.isScrolledToTop.next(this._isScrolledToTopCondition),this.isScrolledToBottom.next(this._isScrolledToBottomCondition),this._initializeSubscriptions(),this.positionerService.changeSettings$.pipe(o.takeUntil(this._destroy$)).subscribe(function(t){e._stopAllSubscriptions$.next(),e._mergeSetttings(t),e._initializeSubscriptions()})},p.prototype.ngOnDestroy=function(){this._destroy$.next(),this._destroy$.complete(),this._stopAllSubscriptions$.next(),this._stopAllSubscriptions$.complete()},p.prototype._initializeSubscriptions=function(){var e=this;i.fromEvent(this._scrollableElement,"scroll").pipe(o.takeUntil(this._stopAllSubscriptions$)).subscribe(function(t){return e._scrollingEvent.next()}),this._scrollingEvent.pipe(o.debounceTime(this._settings.debounceTime.isScrolledToTop),o.delay(this._settings.delay.isScrolledToTop),o.switchMap(function(t){return i.of(e._isScrolledToTopCondition)}),o.takeUntil(this._stopAllSubscriptions$)).subscribe(function(t){return e.isScrolledToTop.next(t)}),this._scrollingEvent.pipe(o.debounceTime(this._settings.debounceTime.isScrolledToBottom),o.delay(this._settings.delay.isScrolledToBottom),o.switchMap(function(t){return i.of(e._isScrolledToBottomCondition)}),o.takeUntil(this._stopAllSubscriptions$)).subscribe(function(t){return e.isScrolledToBottom.next(t)}),this.moveToTop$.pipe(o.debounceTime(this._settings.debounceTime.moveToTop),o.delay(this._settings.delay.moveToTop),o.takeUntil(this._stopAllSubscriptions$)).subscribe(function(t){return e._onMoveToTop()}),this.moveToBottom$.pipe(o.debounceTime(this._settings.debounceTime.moveToBottom),o.delay(this._settings.delay.moveToBottom),o.takeUntil(this._stopAllSubscriptions$),o.switchMap(function(t){return e._onMoveToBottom()})).subscribe(function(t){return e._scrollableElement.scroll({behavior:e._moveToBottomBehavior,top:t+e._moveBottDiffOffset})})},p.prototype._mergeSetttings=function(t){t?(this._settings=l({},t,{offset:l({},this.positionerService.initialSettings.offset,t.offset),delay:l({},this.positionerService.initialSettings.delay,t.delay),debounceTime:l({},this.positionerService.initialSettings.debounceTime,t.debounceTime),smoothScroll:l({},this.positionerService.initialSettings.smoothScroll,t.smoothScroll)}),this._setScrollableElement()):console.error("%c Invalid settings object! ","color: #fff")},p.prototype._setScrollableElement=function(){if(this._scrollableElement=this.el.nativeElement,this._settings.scrollableElement){var t=this.document.querySelector(this._settings.scrollableElement);t?this._scrollableElement=t:console.error("%c Couldn't find "+this._settings.scrollableElement+" in DOM! ","color: #fff")}},p.prototype._onMoveToTop=function(){this._scrollableElement.scroll({behavior:this._moveToTopBehavior,top:this._moveToTopOffset})},p.prototype._onMoveToBottom=function(){var e=this;return i.of(this._moveToBottomOffset).pipe(o.tap(function(t){return e._scrollableElement.scroll({behavior:e._moveToBottomBehavior,top:t})}),o.delay(this._settings.smoothScroll.moveToBottom?600:0))},Object.defineProperty(p.prototype,"_moveToTopBehavior",{get:function(){return this._settings.smoothScroll.moveToTop?"smooth":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_moveToBottomBehavior",{get:function(){return this._settings.smoothScroll.moveToBottom?"smooth":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_isScrolledToTopCondition",{get:function(){return this._scrollableElement.scrollTop<=this._isScrolledToTopOffset},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_isScrolledToBottomCondition",{get:function(){return this._scrollableElement.scrollTop+this._scrollableElement.clientHeight>=this._isScrolledToBottomOffset},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_isScrolledToTopOffset",{get:function(){return this._settings.offset.isScrolledToTop},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_isScrolledToBottomOffset",{get:function(){return this._scrollableElement.scrollHeight-this._settings.offset.isScrolledToBottom},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_moveToTopOffset",{get:function(){return this._settings.offset.moveToTop},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_moveToBottomOffset",{get:function(){return this._settings.offset.moveToBottom?this._scrollableElement.offsetHeight-this._settings.offset.moveToBottom:this._scrollableElement.scrollHeight},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_moveBottDiffOffset",{get:function(){var t=this._scrollableElement.scrollTop-this._scrollableElement.offsetHeight;return this._settings.offset.moveToBottom&&(t=this._scrollableElement.scrollHeight-(this._scrollableElement.scrollTop+this._scrollableElement.offsetHeight)-this._settings.offset.moveToBottom),t},enumerable:!0,configurable:!0}),p.decorators=[{type:s.Directive,args:[{selector:"[ngxPositioner]"}]}],p.ctorParameters=function(){return[{type:s.ElementRef},{type:undefined,decorators:[{type:s.Inject,args:[e.DOCUMENT]}]},{type:n}]},p.propDecorators={settings:[{type:s.Input,args:["settings"]}],moveToTop$:[{type:s.Input}],moveToBottom$:[{type:s.Input}],isScrolledToTop:[{type:s.Output}],isScrolledToBottom:[{type:s.Output}]},p);function p(t,e,o){this.el=t,this.document=e,this.positionerService=o,this.moveToTop$=new i.Subject,this.moveToBottom$=new i.Subject,this.isScrolledToTop=new s.EventEmitter,this.isScrolledToBottom=new s.EventEmitter,this._destroy$=new i.Subject,this._stopAllSubscriptions$=new i.Subject,this._scrollingEvent=new i.Subject}var m=(u.decorators=[{type:s.NgModule,args:[{imports:[e.CommonModule],exports:[c],declarations:[c],providers:[n]}]}],u);function u(){}t.NgxPositionerService=n,t.NgxPositionerDirective=c,t.NgxPositionerModule=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-positioner.umd.min.js.map